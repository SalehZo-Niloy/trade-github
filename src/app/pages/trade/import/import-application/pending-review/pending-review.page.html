<app-trade-layout
  organisationName="Trade Platform"
  solutionName="Trade Finance"
  breadcrumb="Pending review & Approve Import LC"
  basePath="/trade"
>
  <section class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
      <div class="flex items-start gap-3">
        <div class="flex h-9 w-9 items-center justify-center rounded-full bg-blue-50 text-blue-700">
          <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path
              d="M4 4a2 2 0 0 1 2-2h5.2a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V16a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4zm6 0v4h4"
            />
          </svg>
        </div>
        <div>
          <h1 class="text-lg font-semibold text-slate-900">Import LC Requests - Pending Review</h1>
          <p class="mt-1 text-xs text-slate-500">
            Review and approve Import LC requests forwarded by Relationship Officers.
          </p>
        </div>
      </div>
      <!-- <div class="flex items-center gap-3 text-xs text-slate-600">
        <div class="flex items-center gap-2">
          <span
            class="flex h-8 w-8 items-center justify-center rounded-full bg-slate-100 text-[11px] font-semibold text-slate-600"
            >{{ user.initials }}</span
          >
          <div>
            <div class="text-xs font-semibold text-slate-700">{{ user.name }}</div>
            <div class="text-[11px] text-slate-500">{{ user.role }}</div>
          </div>
        </div>
      </div> -->
    </div>
  </section>

  <section class="mt-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="flex items-center justify-between">
      <h2 class="text-sm font-semibold text-slate-900">Quick Search</h2>
      <button
        type="button"
        class="text-xs font-semibold text-slate-500 hover:text-slate-700"
        (click)="toggleAdvancedFilters()"
      >
        Advanced Filters
      </button>
    </div>

    <div class="mt-4 grid gap-4 md:grid-cols-2">
      <label class="text-xs text-slate-600">
        <span class="mb-2 block font-semibold text-slate-700">LC Reference Number</span>
        <input
          [(ngModel)]="filters.reference"
          type="text"
          placeholder="Enter LC reference..."
          class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
        />
      </label>
      <label class="text-xs text-slate-600">
        <span class="mb-2 block font-semibold text-slate-700">Customer Name / CIF</span>
        <input
          [(ngModel)]="filters.customer"
          type="text"
          placeholder="Enter customer name or CIF..."
          class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
        />
      </label>
    </div>

    <div class="mt-4 flex flex-wrap items-center gap-3">
      <app-ui-button (click)="applyFilters()">
        <span class="inline-flex items-center gap-2">
          <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
            <path
              d="M8.5 3.5a5 5 0 1 1-3.53 8.53l-2.6 2.6a.75.75 0 1 1-1.06-1.06l2.6-2.6A5 5 0 0 1 8.5 3.5zm0 1.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7z"
            />
          </svg>
          Search
        </span>
      </app-ui-button>
      <button
        type="button"
        class="inline-flex items-center gap-2 rounded-md border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50"
        (click)="toggleAdvancedFilters()"
      >
        <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
          <path
            d="M3 4a1 1 0 0 1 1-1h12a1 1 0 0 1 .8 1.6l-4.3 5.7v4.2a1 1 0 0 1-.5.9l-2.5 1.4a1 1 0 0 1-1.5-.9v-5.6L3.2 4.6A1 1 0 0 1 3 4z"
          />
        </svg>
        Advanced Filters
      </button>
    </div>

    <div
      *ngIf="advancedFiltersOpen"
      class="mt-6 rounded-xl border border-slate-200 bg-slate-50 p-4"
    >
      <div class="grid gap-4 md:grid-cols-4">
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">Request Status</span>
          <select
            [(ngModel)]="filters.status"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          >
            <option value="All">All Statuses</option>
            <option value="Pending Review">Pending Review</option>
            <option value="Approved">Approved</option>
            <option value="Rejected">Rejected</option>
          </select>
        </label>
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">LC Type</span>
          <select
            [(ngModel)]="filters.lcType"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          >
            <option value="All">All Types</option>
            <option value="Sight LC">Sight LC</option>
            <option value="Usance LC">Usance LC</option>
          </select>
        </label>
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">Currency</span>
          <select
            [(ngModel)]="filters.currency"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          >
            <option value="All">All Currencies</option>
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
            <option value="GBP">GBP</option>
          </select>
        </label>
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">RO Name</span>
          <select
            [(ngModel)]="filters.roName"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          >
            <option value="All">All ROs</option>
            <option value="Sarah Johnson">Sarah Johnson</option>
            <option value="Michael Chen">Michael Chen</option>
            <option value="Emily Davis">Emily Davis</option>
          </select>
        </label>
      </div>
      <div class="mt-4 grid gap-4 md:grid-cols-5">
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">Min Amount</span>
          <input
            [(ngModel)]="filters.minAmount"
            type="number"
            placeholder="0"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          />
        </label>
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">Max Amount</span>
          <input
            [(ngModel)]="filters.maxAmount"
            type="number"
            placeholder="1000000"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          />
        </label>
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">From Date</span>
          <input
            [(ngModel)]="filters.fromDate"
            type="date"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          />
        </label>
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">To Date</span>
          <input
            [(ngModel)]="filters.toDate"
            type="date"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          />
        </label>
        <div class="flex items-end gap-2">
          <app-ui-button (click)="applyFilters()">Apply Filters</app-ui-button>
          <app-ui-button variant="secondary" (click)="clearFilters()">Reset</app-ui-button>
        </div>
      </div>
    </div>
  </section>

  <section class="mt-6 grid gap-4 md:grid-cols-4">
    <div
      *ngFor="let stat of stats"
      class="rounded-2xl border border-slate-200 bg-white px-5 py-4 shadow-sm"
    >
      <div class="flex items-center justify-between">
        <div class="text-xs text-slate-500">{{ stat.label }}</div>
        <div
          class="flex h-8 w-8 items-center justify-center rounded-full bg-slate-50 text-slate-500"
        >
          <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
            <path
              *ngIf="stat.icon === 'clock'"
              d="M10 2a8 8 0 1 1 0 16A8 8 0 0 1 10 2zm.75 4a.75.75 0 0 0-1.5 0v4.25c0 .2.08.39.22.53l2.5 2.5a.75.75 0 1 0 1.06-1.06l-2.28-2.28V6z"
            />
            <path
              *ngIf="stat.icon === 'check'"
              d="M7.6 13.4 4.2 10l1.2-1.2 2.2 2.2 6-6L15 6.2 7.6 13.4z"
            />
            <path
              *ngIf="stat.icon === 'x'"
              d="M6.2 5l3.8 3.8L13.8 5 15 6.2 11.2 10 15 13.8 13.8 15 10 11.2 6.2 15 5 13.8 8.8 10 5 6.2 6.2 5z"
            />
            <path
              *ngIf="stat.icon === 'cash'"
              d="M3 4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4zm2 2v8h10V6H5zm5 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"
            />
          </svg>
        </div>
      </div>
      <div class="mt-3 text-lg font-semibold" [ngClass]="stat.accent">{{ stat.value }}</div>
    </div>
  </section>

  <section class="mt-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="flex items-center justify-between">
      <h2 class="text-sm font-semibold text-slate-900">Import LC Requests</h2>
      <button
        type="button"
        class="inline-flex items-center gap-2 rounded-md border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-600 hover:bg-slate-50"
      >
        <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
          <path d="M3 10a7 7 0 1 1 2.05 4.95l1.42-1.42A5 5 0 1 0 5 10h2l-3 3-3-3h2z" />
        </svg>
        Refresh
      </button>
    </div>

    <div class="mt-4 overflow-x-auto">
      <table class="w-full min-w-[980px] text-left text-xs text-slate-700">
        <thead class="border-b border-slate-200 text-[11px] font-semibold uppercase tracking-wide">
          <tr>
            <th class="px-3 py-2">LC Reference</th>
            <th class="px-3 py-2">Submission Date</th>
            <th class="px-3 py-2">Customer</th>
            <th class="px-3 py-2">LC Type</th>
            <th class="px-3 py-2">Amount</th>
            <th class="px-3 py-2">Beneficiary</th>
            <th class="px-3 py-2">RO Name</th>
            <th class="px-3 py-2">Status</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let request of pagedRequests; trackBy: trackByReference"
            class="border-b border-slate-100 last:border-b-0 hover:bg-slate-50 cursor-pointer"
            (click)="viewSummary(request.reference)"
          >
            <td class="px-3 py-2">
              <span
                class="inline-flex items-center gap-1 text-xs font-semibold text-blue-700"
              >
                <span>{{ request.reference }}</span>
              </span>
            </td>
            <td class="px-3 py-2">{{ request.submittedOn }}</td>
            <td class="px-3 py-2">{{ request.customer }}</td>
            <td class="px-3 py-2">{{ request.lcType }}</td>
            <td class="px-3 py-2">{{ request.amount }} {{ request.currency }}</td>
            <td class="px-3 py-2">{{ request.beneficiary }}</td>
            <td class="px-3 py-2">{{ request.roName }}</td>
            <td class="px-3 py-2">
              <span
                class="inline-flex items-center rounded-full px-2.5 py-0.5 text-[11px] font-medium"
                [ngClass]="statusClasses(request.status)"
              >
                {{ request.status }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div
      class="mt-4 flex flex-col gap-3 text-xs text-slate-500 md:flex-row md:items-center md:justify-between"
    >
      <div class="flex flex-wrap items-center gap-3">
        <label class="flex items-center gap-2">
          <select
            [(ngModel)]="pageSize"
            (ngModelChange)="setPage(1)"
            class="rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-700"
          >
            <option *ngFor="let option of pageSizeOptions" [value]="option">
              {{ option }} per page
            </option>
          </select>
        </label>
        <span>Showing {{ startIndex }}-{{ endIndex }} of {{ totalResults }} results</span>
      </div>
      <div class="flex items-center gap-2">
        <button
          type="button"
          class="rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-500 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-60"
          [disabled]="currentPage === 1"
          (click)="setPage(currentPage - 1)"
        >
          Previous
        </button>
        <button
          *ngFor="let page of pages"
          type="button"
          class="h-7 w-7 rounded-md border text-xs font-semibold"
          [ngClass]="
            page === currentPage
              ? 'border-blue-600 bg-blue-600 text-white'
              : 'border-slate-200 text-slate-600 hover:bg-slate-50'
          "
          (click)="setPage(page)"
        >
          {{ page }}
        </button>
        <button
          type="button"
          class="rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-500 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-60"
          [disabled]="currentPage === totalPages"
          (click)="setPage(currentPage + 1)"
        >
          Next
        </button>
      </div>
    </div>
  </section>
</app-trade-layout>
