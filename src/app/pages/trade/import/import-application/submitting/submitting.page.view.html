<app-trade-layout
  organisationName="Trade Platform"
  solutionName="Trade Finance"
  breadcrumb="Import Letters of Credit"
  basePath="/trade"
>
  <section class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
      <div class="flex flex-col gap-1">
        <h1 class="text-lg font-semibold text-slate-900">Import Letters of Credit</h1>
        <p class="text-xs text-slate-500">
          View, track, and manage your Import LC requests.
        </p>
      </div>
      <div class="flex items-center gap-3">
        <app-ui-button (click)="onCreateNewRequest()">
          <span class="inline-flex items-center gap-2">
            <span class="text-base">+</span>
            <span>Create New Import LC Request</span>
          </span>
        </app-ui-button>
      </div>
    </div>
  </section>

  <section class="mt-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="space-y-4">
      <div class="grid gap-4 md:grid-cols-4 md:items-end">
          <label class="text-xs text-slate-600">
            <span class="mb-2 block font-semibold text-slate-700">LC Reference Number</span>
            <input
              [(ngModel)]="filters.reference"
              type="text"
              placeholder="Enter LC reference"
              class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
            />
          </label>
          <label class="text-xs text-slate-600">
            <span class="mb-2 block font-semibold text-slate-700">Beneficiary Name</span>
            <input
              [(ngModel)]="filters.beneficiaryName"
              type="text"
              placeholder="Enter beneficiary name"
              class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
            />
          </label>
          <label class="text-xs text-slate-600">
            <span class="mb-2 block font-semibold text-slate-700">LC Status</span>
            <select
              [(ngModel)]="filters.status"
              class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
            >
              <option value="All">All Status</option>
              <option value="Issued">Issued</option>
              <option value="Under Review">Under Review</option>
              <option value="Discrepancy">Discrepancy</option>
              <option value="Draft">Draft</option>
            </select>
          </label>
        <div class="flex items-center justify-end gap-3">
          <app-ui-button (click)="applyFilters()">
            <span class="inline-flex items-center gap-2">
              <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                <path
                  d="M8.5 3.5a5 5 0 1 1-3.53 8.53l-2.6 2.6a.75.75 0 1 1-1.06-1.06l2.6-2.6A5 5 0 0 1 8.5 3.5zm0 1.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7z"
                />
              </svg>
              <span>Search</span>
            </span>
          </app-ui-button>
          <button
            type="button"
            class="inline-flex items-center gap-2 rounded-md border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50"
            (click)="clearFilters()"
          >
            <span>Clear</span>
          </button>
        </div>
      </div>
      <button
        type="button"
        class="text-xs font-semibold text-blue-600 hover:text-blue-700"
        (click)="toggleAdvancedFilters()"
      >
        Advanced Filters
      </button>
    </div>

    <div
      *ngIf="advancedFiltersOpen"
      class="mt-6 rounded-xl border border-slate-200 bg-slate-50 p-4"
    >
      <div class="grid gap-4 md:grid-cols-4">
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">Currency</span>
          <select
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          >
            <option>All</option>
            <option>USD</option>
            <option>EUR</option>
            <option>GBP</option>
          </select>
        </label>
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">From Date</span>
          <input
            type="date"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          />
        </label>
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">To Date</span>
          <input
            type="date"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900"
          />
        </label>
        <label class="text-xs text-slate-600">
          <span class="mb-2 block font-semibold text-slate-700">Port of Discharge</span>
          <input
            type="text"
            placeholder="Enter port"
            class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400"
          />
        </label>
      </div>
    </div>
  </section>

  <section class="mt-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="flex items-center justify-between">
      <h2 class="text-sm font-semibold text-slate-900">Import LC Requests</h2>
    </div>

    <div class="mt-4 overflow-x-auto">
      <table class="w-full min-w-[980px] text-left text-xs text-slate-700">
        <thead class="border-b border-slate-200 text-[11px] font-semibold uppercase tracking-wide">
          <tr>
            <th class="px-3 py-2">LC Reference No</th>
            <th class="px-3 py-2">Submission Date</th>
            <th class="px-3 py-2">LC Type</th>
            <th class="px-3 py-2">Amount &amp; Currency</th>
            <th class="px-3 py-2">Beneficiary Name</th>
            <th class="px-3 py-2">Port of Discharge</th>
            <th class="px-3 py-2">Status</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let request of pagedRequests"
            class="border-b border-slate-100 last:border-b-0 hover:bg-slate-50 cursor-pointer"
            (click)="viewRequest(request.reference)"
          >
            <td class="px-3 py-2">
              <span
                class="inline-flex items-center gap-1 text-xs font-semibold text-blue-700"
              >
                <span>{{ request.reference }}</span>
              </span>
            </td>
            <td class="px-3 py-2">
              {{ request.submissionDate }}
            </td>
            <td class="px-3 py-2">
              {{ request.lcType }}
            </td>
            <td class="px-3 py-2">
              {{ request.amount }} {{ request.currency }}
            </td>
            <td class="px-3 py-2">
              {{ request.beneficiaryName }}
            </td>
            <td class="px-3 py-2">
              {{ request.portOfDischarge }}
            </td>
            <td class="px-3 py-2">
              <span
                class="inline-flex items-center rounded-full px-2.5 py-0.5 text-[11px] font-medium"
                [ngClass]="statusClasses(request.status)"
              >
                {{ request.status }}
              </span>
            </td>
          </tr>
          <tr *ngIf="pagedRequests.length === 0">
            <td colspan="7" class="px-3 py-6 text-center text-xs text-slate-500">
              No Import LC requests found.
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div
      class="mt-4 flex flex-col gap-3 text-xs text-slate-500 md:flex-row md:items-center md:justify-between"
    >
      <div class="flex flex-wrap items-center gap-3">
        <label class="flex items-center gap-2">
          <select
            [(ngModel)]="pageSize"
            (ngModelChange)="setPage(1)"
            class="rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-700"
          >
            <option *ngFor="let option of pageSizeOptions" [value]="option">
              {{ option }} per page
            </option>
          </select>
        </label>
        <span>
          Showing {{ startIndex }} to {{ endIndex }} of {{ totalResults }} results
        </span>
      </div>
      <div class="flex items-center gap-2">
        <button
          type="button"
          class="rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-500 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-60"
          [disabled]="currentPage === 1"
          (click)="setPage(currentPage - 1)"
        >
          Previous
        </button>
        <button
          *ngFor="let page of pages"
          type="button"
          class="h-7 w-7 rounded-md border text-xs font-semibold"
          [ngClass]="
            page === currentPage
              ? 'border-blue-600 bg-blue-600 text-white'
              : 'border-slate-200 text-slate-600 hover:bg-slate-50'
          "
          (click)="setPage(page)"
        >
          {{ page }}
        </button>
        <button
          type="button"
          class="rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-500 hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-60"
          [disabled]="currentPage === totalPages"
          (click)="setPage(currentPage + 1)"
        >
          Next
        </button>
      </div>
    </div>
  </section>
</app-trade-layout>
