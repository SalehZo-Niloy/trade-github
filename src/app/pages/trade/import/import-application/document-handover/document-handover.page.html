<app-trade-layout
  organisationName="Trade Platform"
  solutionName="Trade Finance"
  breadcrumb="Document view & Handover"
  basePath="/trade"
>
  <section class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between">
      <div>
        <h1 class="text-lg font-semibold text-slate-900">Import LC Initiation Requests</h1>
        <p class="mt-1 text-xs text-slate-500">
          View and manage Import LC initiation requests submitted by customers.
        </p>
      </div>
      <!-- <div class="flex flex-wrap items-center gap-4 text-xs text-slate-600">
        <button
          type="button"
          class="inline-flex items-center gap-2 rounded-md border border-slate-200 bg-white px-3 py-2 text-xs font-medium text-slate-600 shadow-sm transition hover:bg-slate-50"
        >
          <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path
              d="M3 10a7 7 0 1 1 2.05 4.95l1.42-1.42A5 5 0 1 0 5 10h2l-3 3-3-3h2z"
            />
          </svg>
          Refresh
        </button>
        <div class="flex items-center gap-2 text-slate-700">
          <span
            class="flex h-7 w-7 items-center justify-center rounded-full bg-slate-100 text-[11px] font-semibold text-slate-600"
            >{{ user.initials }}</span
          >
          <span>{{ user.name }}</span>
        </div>
      </div> -->
    </div>
  </section>

  <section class="mt-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="grid gap-4 md:grid-cols-2">
      <label class="text-xs text-slate-600">
        <span class="mb-2 block font-semibold text-slate-700">LC Initiation Reference</span>
        <input
          [(ngModel)]="filters.reference"
          type="text"
          placeholder="Enter LC reference number"
          class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
        />
      </label>
      <label class="text-xs text-slate-600">
        <span class="mb-2 block font-semibold text-slate-700">Customer Name / CIF</span>
        <input
          [(ngModel)]="filters.customer"
          type="text"
          placeholder="Enter customer name or CIF"
          class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
        />
      </label>
    </div>

    <button
      type="button"
      class="mt-4 inline-flex items-center gap-2 text-xs font-medium text-blue-700"
      (click)="toggleAdvancedFilters()"
    >
      <span
        class="inline-flex h-5 w-5 items-center justify-center rounded-full border border-blue-200 bg-blue-50"
      >
        <svg class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path
            d="M5.23 7.21a.75.75 0 0 1 1.06.02L10 11.17l3.71-3.94a.75.75 0 1 1 1.08 1.04l-4.25 4.5a.75.75 0 0 1-1.08 0l-4.25-4.5a.75.75 0 0 1 .02-1.06z"
          />
        </svg>
      </span>
      Advanced Filters
    </button>

    <div *ngIf="advancedFiltersOpen" class="mt-4 grid gap-4 md:grid-cols-3">
      <label class="text-xs text-slate-600">
        <span class="mb-2 block font-semibold text-slate-700">Status</span>
        <select
          [(ngModel)]="filters.status"
          class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
        >
          <option value="All">All</option>
          <option value="Pending Validation">Pending Validation</option>
          <option value="Forwarded to Trade">Forwarded to Trade</option>
          <option value="Initiated">Initiated</option>
        </select>
      </label>
      <label class="text-xs text-slate-600">
        <span class="mb-2 block font-semibold text-slate-700">Date From</span>
        <input
          [(ngModel)]="filters.dateFrom"
          type="date"
          class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
        />
      </label>
      <label class="text-xs text-slate-600">
        <span class="mb-2 block font-semibold text-slate-700">Date To</span>
        <input
          [(ngModel)]="filters.dateTo"
          type="date"
          class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
        />
      </label>
    </div>

    <div class="mt-4 flex flex-wrap items-center justify-between gap-3">
      <app-ui-button (click)="applyFilters()">
        <span class="inline-flex items-center gap-2">
          <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path
              d="M8.5 3.5a5 5 0 1 1-3.53 8.53l-2.6 2.6a.75.75 0 1 1-1.06-1.06l2.6-2.6A5 5 0 0 1 8.5 3.5zm0 1.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7z"
            />
          </svg>
          Search
        </span>
      </app-ui-button>
      <button
        type="button"
        class="text-xs font-medium text-slate-500 transition hover:text-slate-700"
        (click)="clearFilters()"
      >
        Clear All Filters
      </button>
    </div>
  </section>

  <section class="mt-6 grid gap-4 md:grid-cols-4">
    <div
      *ngFor="let stat of stats"
      class="rounded-2xl border border-slate-200 bg-white px-6 py-5 shadow-sm"
    >
      <div class="text-2xl font-semibold" [ngClass]="stat.valueClass">{{ stat.value }}</div>
      <div class="mt-1 text-xs text-slate-500">{{ stat.label }}</div>
    </div>
  </section>

  <section class="mt-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="overflow-x-auto">
      <table class="w-full min-w-[900px] text-left text-xs text-slate-700">
        <thead class="border-b border-slate-200 text-[11px] font-semibold uppercase tracking-wide">
          <tr>
            <th class="px-4 py-3">
              <span class="flex items-center gap-1">
                LC Reference
                <svg class="h-3 w-3 text-slate-400" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M6 8l4-4 4 4H6zm8 4l-4 4-4-4h8z" />
                </svg>
              </span>
            </th>
            <th class="px-4 py-3">Date</th>
            <th class="px-4 py-3">Customer</th>
            <th class="px-4 py-3">Type</th>
            <th class="px-4 py-3">Amount</th>
            <th class="px-4 py-3">Beneficiary</th>
            <th class="px-4 py-3">Status</th>
            <th class="px-4 py-3">Assigned To</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let request of pagedRequests; trackBy: trackByReference"
            class="border-b border-slate-100 last:border-b-0 hover:bg-slate-50 cursor-pointer"
            (click)="viewRequest(request.reference)"
          >
            <td class="px-4 py-3">
              <span
                class="inline-flex items-center gap-1 text-xs font-semibold text-blue-700"
              >
                <span>{{ request.reference }}</span>
              </span>
            </td>
            <td class="px-4 py-3">{{ request.date }}</td>
            <td class="px-4 py-3">{{ request.customer }}</td>
            <td class="px-4 py-3">{{ request.type }}</td>
            <td class="px-4 py-3">{{ request.amount }}</td>
            <td class="px-4 py-3">{{ request.beneficiary }}</td>
            <td class="px-4 py-3">
              <span
                class="inline-flex items-center rounded-full px-2.5 py-0.5 text-[11px] font-medium"
                [ngClass]="statusClasses(request.status)"
              >
                {{ request.status }}
              </span>
            </td>
            <td class="px-4 py-3">{{ request.assignedTo }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div
      class="mt-4 flex flex-col gap-3 text-xs text-slate-500 md:flex-row md:items-center md:justify-between"
    >
      <div class="flex flex-wrap items-center gap-3">
        <span>Showing {{ startIndex }} to {{ endIndex }} of {{ totalResults }} results</span>
        <label class="flex items-center gap-2 text-xs text-slate-500">
          <select
            [(ngModel)]="pageSize"
            (ngModelChange)="setPage(1)"
            class="rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-700"
          >
            <option *ngFor="let option of pageSizeOptions" [value]="option">
              {{ option }} per page
            </option>
          </select>
        </label>
      </div>
      <div class="flex items-center gap-2">
        <button
          type="button"
          class="rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-500 transition hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-60"
          [disabled]="currentPage === 1"
          (click)="setPage(currentPage - 1)"
        >
          Previous
        </button>
        <button
          *ngFor="let page of pages"
          type="button"
          class="h-7 w-7 rounded-md border text-xs font-semibold"
          [ngClass]="
            page === currentPage
              ? 'border-blue-600 bg-blue-600 text-white'
              : 'border-slate-200 text-slate-600 hover:bg-slate-50'
          "
          (click)="setPage(page)"
        >
          {{ page }}
        </button>
        <button
          type="button"
          class="rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-500 transition hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-60"
          [disabled]="currentPage === totalPages"
          (click)="setPage(currentPage + 1)"
        >
          Next
        </button>
      </div>
    </div>
  </section>
</app-trade-layout>
