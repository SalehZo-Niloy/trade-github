<app-trade-layout
  organisationName="Trade Finance Portal"
  solutionName="Trade Finance"
  breadcrumb="Dashboard"
  basePath="/trade"
>
  <div class="px-2 py-4 bg-white min-h-screen space-y-4 w-full flex-1 max-w-screen-lg mx-auto">
    <section class="space-y-2">
      <h1 class="text-2xl font-semibold text-slate-900">Trade Finance</h1>
      <p class="text-sm text-slate-500">
        Simple overview of your Import, Export, and Guarantee activity
      </p>
    </section>

    <section class="space-y-4">
      <div class="grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
        <div class="rounded-md border border-blue-100 bg-white px-5 py-4 shadow-sm">
          <div class="flex items-start gap-3">
            <div class="flex h-9 w-9 items-center justify-center rounded-xl bg-blue-50 text-blue-600">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-5 w-5">
                <path d="M6 4h12v4H6z" class="fill-blue-100" />
                <rect x="5" y="8" width="14" height="11" rx="2" class="stroke-blue-500" stroke-width="1.5" />
              </svg>
            </div>
            <div>
              <div class="text-2xl font-semibold text-blue-700">{{ stats.totalTransactions }}</div>
              <div class="mt-1 text-sm font-medium text-slate-800">Total Transactions</div>
              <div class="mt-1 text-xs text-slate-500">
                Across Import, Export and Guarantee
              </div>
            </div>
          </div>
        </div>

        <div class="rounded-md border border-blue-100 bg-white px-5 py-4 shadow-sm">
          <div class="flex items-start gap-3">
            <div class="flex h-9 w-9 items-center justify-center rounded-xl bg-blue-50 text-blue-600">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-5 w-5">
                <circle cx="12" cy="12" r="7" class="stroke-blue-500" stroke-width="1.5" />
                <path d="M12 9v3.5H9" class="stroke-blue-500" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
            <div>
              <div class="text-2xl font-semibold text-blue-700">{{ stats.pendingAction }}</div>
              <div class="mt-1 text-sm font-medium text-slate-800">Pending Action</div>
              <div class="mt-1 text-xs text-slate-500">
                Items waiting for bank or customer action
              </div>
            </div>
          </div>
        </div>

        <div class="rounded-md border border-blue-100 bg-white px-5 py-4 shadow-sm">
          <div class="flex items-start gap-3">
            <div class="flex h-9 w-9 items-center justify-center rounded-xl bg-blue-50 text-blue-600">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-5 w-5">
                <path d="M8 12.5 11 15l5-6" class="stroke-blue-500" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <circle cx="12" cy="12" r="7" class="stroke-blue-500" stroke-width="1.5" />
              </svg>
            </div>
            <div>
              <div class="text-2xl font-semibold text-blue-700">{{ stats.completed }}</div>
              <div class="mt-1 text-sm font-medium text-slate-800">Completed</div>
              <div class="mt-1 text-xs text-slate-500">
                Approved, realized or advice issued
              </div>
            </div>
          </div>
        </div>

        <div class="rounded-md border border-blue-100 bg-white px-5 py-4 shadow-sm">
          <div class="flex items-start gap-3">
            <div class="flex h-9 w-9 items-center justify-center rounded-xl bg-blue-50 text-blue-600">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-5 w-5">
                <path d="M12 9v4" class="stroke-blue-500" stroke-width="1.5" stroke-linecap="round" />
                <circle cx="12" cy="16" r="0.75" class="fill-blue-500" />
                <path d="M12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16z" class="stroke-blue-500" stroke-width="1.5" />
              </svg>
            </div>
            <div>
              <div class="text-2xl font-semibold text-blue-700">{{ stats.rejected }}</div>
              <div class="mt-1 text-sm font-medium text-slate-800">Returned / Rejected</div>
              <div class="mt-1 text-xs text-slate-500">
                Items needing correction or re-submission
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="space-y-4">
       <div>
            <h2 class="text-sm font-semibold text-slate-900">Quick Actions</h2>
            <p class="text-xs text-slate-500">
              Jump directly to the most common workflows
            </p>
          </div>
      <div class="rounded-md bg-white px-6 py-5 shadow-sm border border-blue-100">
        <div class="flex flex-col gap-3">
          <div class="w-full">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 w-full">
            <a
              [routerLink]="['/trade', 'import', 'submitting']"
              class="rounded-md border border-blue-100 px-3 py-4 text-xs font-medium text-blue-700 hover:bg-blue-50 h-full flex flex-col justify-between"
            >
              <div class="flex items-center justify-between gap-3">
                <div>
                  <span class="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                    Import
                  </span>
                  <div class="mt-1 text-sm text-slate-900">Apply for Import LC</div>
                </div>
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-blue-50 text-blue-600">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-4 w-4">
                    <rect x="5" y="6" width="14" height="11" rx="2" class="stroke-blue-500" stroke-width="1.5" />
                    <path d="M8 9h8M8 12h5" class="stroke-blue-500" stroke-width="1.4" stroke-linecap="round" />
                  </svg>
                </div>
              </div>
            </a>
            <a
              [routerLink]="['/trade', 'import', 'lc-amendment-request']"
              class="rounded-md border border-blue-100 px-3 py-4 text-xs font-medium text-blue-700 hover:bg-blue-50 h-full flex flex-col justify-between"
            >
              <div class="flex items-center justify-between gap-3">
                <div>
                  <span class="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                    Import
                  </span>
                  <div class="mt-1 text-sm text-slate-900">Request LC Amendment</div>
                </div>
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-blue-50 text-blue-600">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-4 w-4">
                    <path d="M7 6h10v12H7z" class="stroke-blue-500" stroke-width="1.5" />
                    <path d="M10 12h4M10 9h4M10 15h2" class="stroke-blue-500" stroke-width="1.4" stroke-linecap="round" />
                  </svg>
                </div>
              </div>
            </a>
            <a
              [routerLink]="['/trade', 'dc-advising', 'customer', 'dashboard']"
              class="rounded-md border border-blue-100 px-3 py-4 text-xs font-medium text-blue-700 hover:bg-blue-50 h-full flex flex-col justify-between"
            >
              <div class="flex items-center justify-between gap-3">
                <div>
                  <span class="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                    Export
                  </span>
                  <div class="mt-1 text-sm text-slate-900">Apply for LC Advising</div>
                </div>
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-blue-50 text-blue-600">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-4 w-4">
                    <path d="M5 7h14v10H5z" class="stroke-blue-500" stroke-width="1.5" />
                    <path d="M8 11h4M8 14h3M14 11h3" class="stroke-blue-500" stroke-width="1.4" stroke-linecap="round" />
                  </svg>
                </div>
              </div>
            </a>
            <a
              [routerLink]="['/trade', 'export-bill', 'customer', 'dashboard']"
              class="rounded-md border border-blue-100 px-3 py-4 text-xs font-medium text-blue-700 hover:bg-blue-50 h-full flex flex-col justify-between"
            >
              <div class="flex items-center justify-between gap-3">
                <div>
                  <span class="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                    Export
                  </span>
                  <div class="mt-1 text-sm text-slate-900">Submit Export Bill</div>
                </div>
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-blue-50 text-blue-600">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-4 w-4">
                    <path d="M6 6h12v12H6z" class="stroke-blue-500" stroke-width="1.5" />
                    <path
                      d="M9 13h3.5a2 2 0 0 0 0-4H9v6m6 0-2-2m2 2-2 2"
                      class="stroke-blue-500"
                      stroke-width="1.4"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </div>
              </div>
            </a>
            <button
              type="button"
              class="rounded-md border border-slate-200 px-3 py-4 text-xs font-medium text-slate-400 bg-slate-50 cursor-not-allowed h-full flex flex-col justify-between"
              disabled
            >
              <div class="flex items-center justify-between gap-3">
                <div>
                  <span class="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                    Guarantee
                  </span>
                  <div class="mt-1 text-sm text-slate-500">Apply for New Guarantee</div>
                </div>
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-slate-100 text-slate-400">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-4 w-4">
                    <path
                      d="M12 5 6 8v5.5C6 16.985 8.239 19 12 20c3.761-1 6-3.015 6-6.5V8l-6-3z"
                      class="stroke-slate-400"
                      stroke-width="1.5"
                    />
                    <path d="M10 12h4" class="stroke-slate-400" stroke-width="1.4" stroke-linecap="round" />
                  </svg>
                </div>
              </div>
            </button>
            <button
              type="button"
              class="rounded-md border border-slate-200 px-3 py-4 text-xs font-medium text-slate-400 bg-slate-50 cursor-not-allowed h-full flex flex-col justify-between"
              disabled
            >
              <div class="flex items-center justify-between gap-3">
                <div>
                  <span class="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                    Guarantee
                  </span>
                  <div class="mt-1 text-sm text-slate-500">Request Amendment</div>
                </div>
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-slate-100 text-slate-400">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-4 w-4">
                    <path
                      d="M12 5 6 8v5.5C6 16.985 8.239 19 12 20c3.761-1 6-3.015 6-6.5V8l-6-3z"
                      class="stroke-slate-400"
                      stroke-width="1.5"
                    />
                    <path
                      d="M10 12h4M10.5 9.5l3 3"
                      class="stroke-slate-400"
                      stroke-width="1.4"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </div>
              </div>
            </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="space-y-4">
      <div class="grid grid-cols-1 gap-4 xl:grid-cols-3">
        <div class="rounded-md border border-slate-200 bg-white p-5 shadow-sm">
          <div class="mb-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <div class="flex h-8 w-8 items-center justify-center rounded-xl bg-blue-50 text-blue-600">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-4 w-4">
                  <path d="M7 6h10v12H7z" class="stroke-blue-500" stroke-width="1.5" />
                </svg>
              </div>
              <h3 class="text-sm font-semibold text-slate-900">Import Module</h3>
            </div>
            <button class="text-xs font-semibold text-blue-600">View All</button>
          </div>
          <div class="grid grid-cols-2 gap-3 text-sm">
            <div class="rounded-md bg-blue-50 px-4 py-3">
              <div class="text-[11px] font-medium text-slate-600">Active LCs</div>
              <div class="mt-1 text-xl font-semibold text-slate-900">12</div>
            </div>
            <div class="rounded-md bg-blue-50 px-4 py-3">
              <div class="text-[11px] font-medium text-slate-600">Settled</div>
              <div class="mt-1 text-xl font-semibold text-slate-900">8</div>
            </div>
          </div>
          <div class="mt-4 space-y-3 text-sm">
            <div class="flex items-center justify-between rounded-md border border-slate-100 bg-slate-50 px-4 py-3">
              <div>
                <div class="text-[11px] font-medium text-slate-500">Recent Import LCs</div>
                <div class="mt-1 text-sm font-semibold text-slate-900">ILC-2024-0156</div>
                <div class="text-xs text-slate-500">USD 850,000</div>
              </div>
              <span class="rounded-full bg-emerald-50 px-3 py-1 text-[11px] font-semibold text-emerald-600">
                Issued
              </span>
            </div>
            <div class="flex items-center justify-between rounded-md border border-slate-100 bg-slate-50 px-4 py-3">
              <div>
                <div class="text-sm font-semibold text-slate-900">ILC-2024-0142</div>
                <div class="text-xs text-slate-500">USD 1,200,000</div>
              </div>
              <span class="rounded-full bg-blue-50 px-3 py-1 text-[11px] font-semibold text-blue-600">
                Submitted
              </span>
            </div>
          </div>
          <div class="mt-4 border-t border-slate-100 pt-3 text-xs text-slate-500">
            <div class="font-semibold text-slate-700">Pending Actions</div>
            <ul class="mt-1 space-y-1">
              <li class="flex items-center gap-2">
                <span class="h-1.5 w-1.5 rounded-full bg-amber-500"></span>
                <span>Margin pending: 1</span>
              </li>
              <li class="flex items-center gap-2">
                <span class="h-1.5 w-1.5 rounded-full bg-rose-500"></span>
                <span>Amendment required: 1</span>
              </li>
            </ul>
          </div>
        </div>

        <div class="rounded-md border border-slate-200 bg-white p-5 shadow-sm">
          <div class="mb-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <div class="flex h-8 w-8 items-center justify-center rounded-xl bg-emerald-50 text-emerald-600">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-4 w-4">
                  <path d="M6 7h12v10H6z" class="stroke-emerald-500" stroke-width="1.5" />
                </svg>
              </div>
              <h3 class="text-sm font-semibold text-slate-900">Export Module</h3>
            </div>
            <button class="text-xs font-semibold text-emerald-600">View All</button>
          </div>
          <div class="grid grid-cols-3 gap-3 text-sm">
            <div class="rounded-md bg-emerald-50 px-4 py-3">
              <div class="text-[11px] font-medium text-slate-600">Active Bills</div>
              <div class="mt-1 text-xl font-semibold text-slate-900">8</div>
            </div>
            <div class="rounded-md bg-emerald-50 px-4 py-3">
              <div class="text-[11px] font-medium text-slate-600">Paid</div>
              <div class="mt-1 text-xl font-semibold text-slate-900">15</div>
            </div>
            <div class="rounded-md bg-emerald-50 px-4 py-3">
              <div class="text-[11px] font-medium text-slate-600">Pending</div>
              <div class="mt-1 text-xl font-semibold text-slate-900">3</div>
            </div>
          </div>
          <div class="mt-4 space-y-3 text-sm">
            <div class="flex items-center justify-between rounded-md border border-slate-100 bg-slate-50 px-4 py-3">
              <div>
                <div class="text-[11px] font-medium text-slate-500">Recent Export Bills</div>
                <div class="mt-1 text-sm font-semibold text-slate-900">EXB-2024-0089</div>
                <div class="text-xs text-slate-500">USD 125,000</div>
              </div>
              <span class="rounded-full bg-emerald-50 px-3 py-1 text-[11px] font-semibold text-emerald-600">
                Accepted
              </span>
            </div>
            <div class="flex items-center justify-between rounded-md border border-slate-100 bg-slate-50 px-4 py-3">
              <div>
                <div class="text-sm font-semibold text-slate-900">EXB-2024-0076</div>
                <div class="text-xs text-slate-500">USD 98,500</div>
              </div>
              <span class="rounded-full bg-blue-50 px-3 py-1 text-[11px] font-semibold text-blue-600">
                Submitted
              </span>
            </div>
          </div>
          <div class="mt-4 border-t border-slate-100 pt-3 text-xs text-slate-500">
            <div class="font-semibold text-slate-700">Export Proceeds</div>
            <div class="mt-1 flex items-center justify-between">
              <span>Pending</span>
              <span class="font-semibold text-emerald-600">USD 223,500</span>
            </div>
            <div class="mt-1 flex items-center justify-between">
              <span>Realized</span>
              <span class="font-semibold text-emerald-600">USD 1,450,000</span>
            </div>
          </div>
        </div>

        <div class="rounded-md border border-slate-200 bg-white p-5 shadow-sm">
          <div class="mb-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <div class="flex h-8 w-8 items-center justify-center rounded-xl bg-purple-50 text-purple-600">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" class="h-4 w-4">
                  <path d="M12 4 5 8v8l7 4 7-4V8z" class="stroke-purple-500" stroke-width="1.5" stroke-linejoin="round" />
                </svg>
              </div>
              <h3 class="text-sm font-semibold text-slate-900">Guarantee Module</h3>
            </div>
            <button class="text-xs font-semibold text-purple-600">View All</button>
          </div>
          <div class="grid grid-cols-2 gap-3 text-sm">
            <div class="rounded-md bg-purple-50 px-4 py-3">
              <div class="text-[11px] font-medium text-slate-600">Active</div>
              <div class="mt-1 text-xl font-semibold text-slate-900">8</div>
            </div>
            <div class="rounded-md bg-purple-50 px-4 py-3">
              <div class="text-[11px] font-medium text-slate-600">Expiring Soon</div>
              <div class="mt-1 text-xl font-semibold text-slate-900">2</div>
            </div>
          </div>
          <div class="mt-4 space-y-3 text-sm">
            <div class="flex items-center justify-between rounded-md border border-slate-100 bg-slate-50 px-4 py-3">
              <div>
                <div class="text-[11px] font-medium text-slate-500">Active Guarantees</div>
                <div class="mt-1 text-sm font-semibold text-slate-900">GUA-2024-0145</div>
                <div class="text-xs text-slate-500">USD 500,000</div>
              </div>
              <span class="rounded-full bg-emerald-50 px-3 py-1 text-[11px] font-semibold text-emerald-600">
                Active
              </span>
            </div>
            <div class="flex items-center justify-between rounded-md border border-slate-100 bg-slate-50 px-4 py-3">
              <div>
                <div class="text-sm font-semibold text-slate-900">GUA-2024-0132</div>
                <div class="text-xs text-slate-500">USD 250,000</div>
              </div>
              <span class="rounded-full bg-amber-50 px-3 py-1 text-[11px] font-semibold text-amber-600">
                Expiring
              </span>
            </div>
          </div>
          <div class="mt-4 border-t border-slate-100 pt-3 text-xs text-slate-500">
            <div class="flex items-center justify-between">
              <span>Amendment Requests</span>
              <span class="font-semibold text-slate-700">2 Pending</span>
            </div>
            <div class="mt-1 flex items-center justify-between">
              <span>Claims Submitted</span>
              <span class="font-semibold text-blue-600">1 Under Review</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="space-y-4">
      <div class="rounded-md border border-slate-200 bg-white shadow-sm">
        <div class="flex items-center justify-between border-b border-slate-200 px-6 py-4">
          <div>
            <h2 class="text-sm font-semibold text-slate-900">
              Unified Transaction Tracker
            </h2>
            <p class="text-xs text-slate-500">
              Consolidated view across Import, Export, and Guarantee modules
            </p>
          </div>
          <div class="flex items-center gap-3">
            <div>
              <input
                type="text"
                [(ngModel)]="searchTerm"
                (ngModelChange)="applyFilters()"
                placeholder="Search Application ID"
                class="w-48 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-medium text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
            <div class="relative">
              <button
                type="button"
                (click)="toggleModuleFilter()"
                class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-700"
              >
                <span>{{ moduleFilter === 'All' ? 'All Modules' : moduleFilter }}</span>
                <span class="text-slate-400">
                  <svg viewBox="0 0 20 20" class="h-3.5 w-3.5" fill="none">
                    <path d="M6 8l4 4 4-4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </span>
              </button>
              <div
                *ngIf="showModuleDropdown"
                class="absolute right-0 z-10 mt-2 w-40 rounded-xl border border-slate-200 bg-white py-1 shadow-lg"
              >
                <button
                  *ngFor="let option of moduleOptions"
                  type="button"
                  class="flex w-full items-center justify-between px-3 py-1.5 text-xs text-slate-700 hover:bg-slate-50"
                  (click)="selectModule(option)"
                >
                  <span>{{ option === 'All' ? 'All Modules' : option }}</span>
                  <span
                    *ngIf="moduleFilter === option"
                    class="h-1.5 w-1.5 rounded-full bg-blue-500"
                  ></span>
                </button>
              </div>
            </div>
            <div class="relative">
              <button
                type="button"
                (click)="toggleStatusFilter()"
                class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-700"
              >
                <span>{{ statusFilter === 'All' ? 'All Status' : statusFilter }}</span>
                <span class="text-slate-400">
                  <svg viewBox="0 0 20 20" class="h-3.5 w-3.5" fill="none">
                    <path d="M6 8l4 4 4-4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </span>
              </button>
              <div
                *ngIf="showStatusDropdown"
                class="absolute right-0 z-10 mt-2 w-44 rounded-xl border border-slate-200 bg-white py-1 shadow-lg"
              >
                <button
                  *ngFor="let status of statusOptions"
                  type="button"
                  class="flex w-full items-center justify-between px-3 py-1.5 text-xs text-slate-700 hover:bg-slate-50"
                  (click)="selectStatus(status)"
                >
                  <span>{{ status === 'All' ? 'All Status' : status }}</span>
                  <span
                    *ngIf="statusFilter === status"
                    class="h-1.5 w-1.5 rounded-full bg-blue-500"
                  ></span>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-slate-200">
            <thead class="bg-slate-50">
              <tr>
                <th class="w-10 px-6 py-3"></th>
                <th class="px-6 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                  Application ID
                </th>
                <th class="px-6 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                  Module
                </th>
                <th class="px-6 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                  Transaction Type
                </th>
                <th class="px-6 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                  Current Status
                </th>
                <th class="px-6 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                  Last Bank Action
                </th>
                <th class="px-6 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                  Next Step
                </th>
                <th class="px-6 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                  Last Updated
                </th>
                <th class="px-6 py-3"></th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-100 bg-white">
              <ng-container *ngFor="let row of filteredUnifiedRows">
                <tr class="hover:bg-slate-50 transition-colors cursor-pointer" [routerLink]="row.link">
                  <!-- <td class="px-6 py-4 text-sm text-slate-500">
                    <button (click)="toggleHistory(row.id)" class="text-slate-400 hover:text-slate-600">
                      <svg
                        *ngIf="expandedTransactionId !== row.id"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        class="h-4 w-4"
                      >
                        <path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                      <svg
                        *ngIf="expandedTransactionId === row.id"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        class="h-4 w-4"
                      >
                        <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </button>
                  </td> -->
                  <td></td>
                  <td class="px-6 py-4 text-sm font-semibold">
                    <span class="text-blue-700 hover:text-blue-900 underline-offset-2 hover:underline">
                      {{ row.id }}
                    </span>
                  </td>
                  <td class="px-6 py-4 text-sm">
                    <span
                      class="inline-flex items-center rounded-full px-2.5 py-1 text-[11px] font-semibold text-slate-600"
                    >
                      {{ row.module }}
                    </span>
                  </td>
                  <td class="px-6 py-4 text-sm text-slate-600">
                    {{ row.transactionType }}
                  </td>
                  <td class="px-6 py-4">
                    <span
                      class="inline-flex rounded-full px-2.5 py-1 text-[11px] font-semibold"
                      [ngClass]="getStatusClass(row.statusKey)"
                    >
                      {{ row.statusDisplay }}
                    </span>
                  </td>
                  <td class="px-6 py-4 text-sm text-slate-600">
                    {{ row.lastBankAction }}
                  </td>
                  <td class="px-6 py-4 text-sm text-slate-600">
                    {{ row.nextStep }}
                  </td>
                  <td class="px-6 py-4 text-sm text-slate-500">
                    {{ row.lastUpdated | date: 'dd-MMM-yyyy' }}
                  </td>
                </tr>
                <tr *ngIf="expandedTransactionId === row.id" class="bg-slate-50">
                  <td colspan="9" class="px-6 pb-4 pt-0">
                    <div class="ml-10 border-t border-slate-200 pt-4">
                      <h4 class="text-xs font-semibold uppercase tracking-wide text-slate-500 mb-3">
                        Processing History
                      </h4>
                      <div *ngIf="row.history.length === 0" class="text-sm text-slate-500 italic">
                        No history available.
                      </div>
                      <div *ngIf="row.history.length > 0" class="flow-root">
                        <ul role="list" class="-mb-8">
                          <li *ngFor="let event of row.history; let last = last">
                            <div class="relative pb-6">
                              <span
                                *ngIf="!last"
                                class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-slate-200"
                                aria-hidden="true"
                              ></span>
                              <div class="relative flex space-x-3">
                                <div>
                                  <span
                                    class="flex h-8 w-8 items-center justify-center rounded-full ring-8 ring-white"
                                    [ngClass]="getStatusClass(event.status)"
                                  >
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4">
                                      <path
                                        fill-rule="evenodd"
                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-11.25a.75.75 0 00-1.5 0v2.5h-2.5a.75.75 0 000 1.5h3.25a.75.75 0 00.75-.75v-3.25z"
                                        clip-rule="evenodd"
                                      />
                                    </svg>
                                  </span>
                                </div>
                                <div class="flex min-w-0 flex-1 justify-between space-x-4 pt-1.5">
                                  <div>
                                    <p class="text-sm text-slate-600">
                                      <span class="font-medium text-slate-900">{{ event.status }}</span>
                                      <span *ngIf="event.comment"> – {{ event.comment }}</span>
                                      <span class="block text-xs text-slate-400">by {{ event.actor }}</span>
                                    </p>
                                  </div>
                                  <div class="whitespace-nowrap text-right text-xs text-slate-500">
                                    <time [attr.datetime]="event.date">
                                      {{ event.date }} {{ event.time }}
                                    </time>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </td>
                </tr>
              </ng-container>
              <tr *ngIf="filteredUnifiedRows.length === 0">
                <td colspan="9" class="px-6 py-10 text-center text-sm text-slate-500">
                  No transactions found for selected filters.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="grid grid-cols-1 gap-4 xl:grid-cols-2">
      <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm space-y-4">
        <h2 class="text-sm font-semibold text-slate-900">Financial & Exposure Summary</h2>
        <div class="space-y-3 text-sm">
          <div class="rounded-2xl bg-blue-50 px-4 py-3">
            <div class="text-xs font-semibold uppercase tracking-wide text-slate-500">
              Margin Held by Module
            </div>
            <div class="mt-3 space-y-1 text-sm">
              <div class="flex items-center justify-between">
                <span class="text-slate-700">Import LC</span>
                <span class="font-semibold text-slate-900">USD 2,400,000</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-slate-700">Guarantees</span>
                <span class="font-semibold text-slate-900">USD 1,800,000</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-slate-700">Export Bills</span>
                <span class="font-semibold text-slate-900">USD 950,000</span>
              </div>
            </div>
          </div>

          <div class="rounded-2xl bg-purple-50 px-4 py-3">
            <div class="text-xs font-semibold uppercase tracking-wide text-slate-500">
              Charges Summary
            </div>
            <div class="mt-3 space-y-1 text-sm">
              <div class="flex items-center justify-between">
                <span class="text-slate-700">Charges Paid (MTD)</span>
                <span class="font-semibold text-emerald-600">USD 45,800</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-slate-700">Charges Due</span>
                <span class="font-semibold text-rose-500">USD 12,500</span>
              </div>
            </div>
          </div>

          <div class="rounded-2xl bg-emerald-50 px-4 py-3">
            <div class="text-xs font-semibold uppercase tracking-wide text-slate-500">
              Exposure Utilization
            </div>
            <div class="mt-3 space-y-1 text-sm">
              <div class="flex items-center justify-between">
                <span class="text-slate-700">Import LC Exposure</span>
                <span class="font-semibold text-slate-900">USD 8,200,000</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-slate-700">Guarantee Exposure</span>
                <span class="font-semibold text-slate-900">USD 4,300,000</span>
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
            <div class="text-xs font-semibold uppercase tracking-wide text-slate-500 mb-2">
              Recent Financial Activity
            </div>
            <ul class="space-y-2 text-sm">
              <li class="flex items-start gap-2">
                <span class="mt-1 h-2 w-2 rounded-full bg-emerald-500"></span>
                <div>
                  <div class="font-medium text-slate-800">
                    Margin blocked – ILC-2024-0156
                  </div>
                  <div class="text-xs text-slate-500">15-Jan-2024</div>
                </div>
              </li>
              <li class="flex items-start gap-2">
                <span class="mt-1 h-2 w-2 rounded-full bg-amber-500"></span>
                <div>
                  <div class="font-medium text-slate-800">
                    Charges debited – USD 8,500
                  </div>
                  <div class="text-xs text-slate-500">14-Jan-2024</div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm space-y-4">
        <h2 class="text-sm font-semibold text-slate-900">Notifications & Alerts</h2>
        <div class="space-y-3 text-sm">
          <div class="rounded-2xl border border-rose-100 bg-rose-50 px-4 py-3">
            <div class="flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-rose-500">
              <span class="h-1.5 w-1.5 rounded-full bg-rose-500"></span>
              <span>High Priority Alerts</span>
            </div>
            <div class="mt-3 space-y-2">
              <div class="rounded-xl bg-white/70 px-4 py-3">
                <div class="text-sm font-semibold text-slate-900">
                  Guarantee Expiring Soon
                </div>
                <div class="mt-1 text-xs text-slate-500">
                  GUA-2024-0132 expires on 28-Jan-2024 · 10:30 AM
                </div>
              </div>
              <div class="rounded-xl bg-amber-50 px-4 py-3">
                <div class="text-sm font-semibold text-slate-900">
                  Action Required
                </div>
                <div class="mt-1 text-xs text-slate-500">
                  Application ILC-2024-0142 returned for correction · 15-Jan-2024 2:15 PM
                </div>
              </div>
            </div>
          </div>

          <div class="rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
            <div class="flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-slate-600">
              <span class="h-1.5 w-1.5 rounded-full bg-blue-500"></span>
              <span>Recent Notifications</span>
            </div>
            <div class="mt-3 space-y-2">
              <div class="rounded-xl bg-blue-50 px-4 py-3">
                <div class="text-sm font-semibold text-slate-900">
                  Application Approved
                </div>
                <div class="mt-1 text-xs text-slate-500">
                  Import LC ILC-2024-0156 has been issued · 16-Jan-2024 9:45 AM
                </div>
              </div>
              <div class="rounded-xl bg-emerald-50 px-4 py-3">
                <div class="text-sm font-semibold text-slate-900">
                  Export Bill Accepted
                </div>
                <div class="mt-1 text-xs text-slate-500">
                  Bill EXB-2024-0089 accepted by bank · 14-Jan-2024 11:20 AM
                </div>
              </div>
              <div class="rounded-xl bg-slate-50 px-4 py-3">
                <div class="text-sm font-semibold text-slate-900">
                  Amendment Under Review
                </div>
                <div class="mt-1 text-xs text-slate-500">
                  Guarantee amendment GUA-2024-0145-A1 submitted · 13-Jan-2024 3:30 PM
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</app-trade-layout>
